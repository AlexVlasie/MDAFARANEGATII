<!DOCTYPE html>
<html>
<head>
  <title>Calculator MDA - COSTURI REPARATIE</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;800&display=swap" rel="stylesheet">
  <style>
    body {
      background-image: url("back.jpg");
	  font-family: 'Inter', sans-serif;
      height: 100vh;
    }


#webchatgpt-snackbar-inner {
  display: none !important;
}


label {
  background-color: #bbe4e9;
  width: 413.2px;
}

.container {
  width: 400px;
  margin: 50px auto;
  margin-top: 0px;
}

.input-group {
  margin-bottom: 15px;
}

.label-freon {
  background-color: #bbe4e9;
  display: inline-block;
  width: 200px;
}

.input-group-freon {
  display: inline-block;
  margin-right: 10px;
}

.label-freon input[type="text"] {
  width: 50px;
}

label {
  display: block;
  margin-bottom: 5px;
  border-radius: 2px;
  font-family: 'Inter', sans-serif;
}

button {
  padding: 10px;
}

#result {
  margin-top: 15px;
  font-weight: bold;
}

li {
  color: white;
}

.legenda {
  border: 2px solid green;
  border-radius: 6.5px;
}

#result > button {
  margin-bottom: 15px;
}

.button-24 {
  background: #FF4742;
  border: 1px solid #FF4742;
  border-radius: 6px;
  box-shadow: rgba(0, 0, 0, 0.1) 1px 2px 4px;
  box-sizing: border-box;
  color: #FFFFFF;
  cursor: pointer;
  display: inline-block;
  font-family: nunito,roboto,proxima-nova,"proxima nova",sans-serif;
  font-size: 13px;
  font-weight: 800;
  line-height: 16px;
  min-height: 40px;
  outline: 0;
  padding: 12px 14px;
  text-align: center;
  text-rendering: geometricprecision;
  text-transform: none;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  vertical-align: middle;
}

.button-24:hover,
.button-24:active {
  background-color: initial;
  background-position: 0 0;
  color: #FF4742;
}

.button-24:active {
  opacity: .5;
}

footer {
	display: flex;
	flex-direction: column;
	align-items: flex-end;
}

h4 {
	align-content: flex-end;
}

.titlu-final {
	display: flex;
	flex-direction: column;
	align-items: center;
}

.Titlu-final1 {
	color: white;
	font-size: 25px;
	align-content: center;
}

@media only screen and (max-width: 480px) {
  .container {
    width: 100%;
    margin: 0;
  }
}

#result {
  color: white;
  font-size: 1.1rem;
}

#co {
    margin-top: 4px;
}

.label-freon {
    border-radius: 6px;
}

.introd {
    width: 405px;
}

.input-group-freon {
    margin-top: 100px;
    margin-left: 120px;
}

.bossule {
    margin-top: 0;
}


.wrapper {
    display: grid;
grid-template-columns: 1fr 3fr 1fr;
  grid-template-rows: 20% 20% 20% 20% 20%;
}

.reparatie-economica {
  font-size: 30px;
  color: green; 
  -webkit-text-stroke: 1px black;
}

.reparatie-neeconomica {
  font-size: 30px;
  color: #FF0000;
  -webkit-text-stroke: 1px black;
}


  </style>
  <meta name="author" content="Alex Vlasie">
</head>
<body>
  <div class="wrapper">
    <div class="input-group-freon">
      <div><h1 style="font-size: 23px; color: white; margin-bottom: 4px;">Calculator freon</h1></div>
      <div class="label-freon">
        <div>
          <label for="cantitate-freon" style="width: 170px;">Cantitate Freon (g):</label>
        </div>
        <div>
          <input type="text" id="cantitate-freon" oninput="calculeazaCantitateFreon()">
        </div>
      </div>
      <div id="result-freon" style="color: white; font-weight: 30";></div>
      <button id= "co" class="button-24" onclick="copyCantitateFreonToClipboard()">Copiază</button>
    </div>

    <div class="bossule">
      <div class="titlu-final">
        <h1 class="Titlu-final1">Calculator reparatie</h1>
      </div>
      <div class="container">
        <div class="input-group">
          <label for="piese">Cost piese (lei):</label>
          <input class="introd" type="text" id="piese" oninput="updateReparatiiValue()">
        </div>
        <div class="input-group">
          <label for="manopera">Cost manopera (lei):</label>
          <input class="introd" type="text" id="manopera" oninput="updateReparatiiValue()">
        </div>
        <div class="input-group">
          <label for="transport">Cost transport (lei):</label>
          <input class="introd" type="text" id="transport" oninput="updateReparatiiValue()">
        </div>
        <div class="input-group">
          <label for="reparatii">Valoarea reparatiei (lei):</label>
          <input class="introd" type="text" id="reparatii" readonly>
        </div>
        <div class="input-group">
          <label for="produs">Valoarea produsului (lei):</label>
          <input class="introd" type="text" id="produs">
        </div>
        <div class="input-group">
          <label for="data">Data achizitiei:</label>
          <input type="date" id="data">
        </div>

        <button button class="button-24" role="button" onclick="calculeaza()">Calculeaza</button>

        <div id="result"></div>
        <div class="legenda">
          <ul>
            <li>1 an - 2 ani -> 50%</li>
            <li>2 ani - 2 ani jumatate -> 60%</li>
            <li>2 ani jumatate - 3 ani -> 70%</li>
            <li>3 ani-3 ani jumatate -> 80%</li>
            <li>3 ani jumatate - 4 ani -> 100%</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <footer>
    <h4 style="color: white; font-size: 10px; font-weight: 0;">©Alex Vlasie</h4>
  </footer>

  <script>
    function updateReparatiiValue() {
      var piese = parseFloat(document.getElementById('piese').value);
      var manopera = parseFloat(document.getElementById('manopera').value);
      var transport = parseFloat(document.getElementById('transport').value);

      var reparatiiValue = (isNaN(piese) ? 0 : piese) + (isNaN(manopera) ? 0 : manopera) + (isNaN(transport) ? 0 : transport);
      document.getElementById('reparatii').value = reparatiiValue.toFixed(2);
    }

    function calculeaza() {
      var piese = parseFloat(document.getElementById('piese').value);
      var manopera = parseFloat(document.getElementById('manopera').value);
      var transport = parseFloat(document.getElementById('transport').value);
      var reparatii = parseFloat(document.getElementById('reparatii').value);
      var produs = parseFloat(document.getElementById('produs').value);
      var data = document.getElementById('data').value;

      if (isNaN(reparatii) || isNaN(produs) || isNaN(piese) || isNaN(manopera) || isNaN(transport)) {
        alert('Te rog introdu valori numerice valide pentru câmpurile de costuri și valoarea produsului.');
        return;
      }

      var procent = (reparatii / produs) * 100;
      var procentRotunjit = Math.round(procent * 10) / 10;
      var resultDiv = document.getElementById('result');

      var currentDate = new Date();
      var selectedDate = new Date(data);
      var yearsDiff = currentDate.getFullYear() - selectedDate.getFullYear();
      var monthsDiff = currentDate.getMonth() - selectedDate.getMonth();
      var totalMonthsDiff = yearsDiff * 12 + monthsDiff;

      var perioadaText = '';
      if (totalMonthsDiff === 1) {
        perioadaText = '1 lună';
      } else if (totalMonthsDiff > 1) {
        var years = Math.floor(totalMonthsDiff / 12);
        var months = totalMonthsDiff % 12;

        if (years === 1 && months === 0) {
          perioadaText = '1 an';
        } else if (years === 1 && months === 1) {
          perioadaText = '1 an și 1 lună';
        } else if (years === 1 && months > 1) {
          perioadaText = '1 an și ' + months + ' luni';
        } else if (years > 1 && months === 0) {
          perioadaText = years + ' ani';
        } else if (years > 1 && months === 1) {
          perioadaText = years + ' ani și 1 lună';
        } else {
          perioadaText = years + ' ani și ' + months + ' luni';
        }
      }

      var sumaCosturi = piese + manopera + transport;
      resultDiv.innerHTML = 'Procent: ' + procentRotunjit + '% | Data:' + data + '| Perioada: ' + perioadaText;

      if (!isNaN(sumaCosturi)) {
        resultDiv.innerHTML += ' | Costuri: ' + sumaCosturi.toFixed(2) + ' lei';
      }

      var copyButton = document.createElement('button');
      copyButton.innerHTML = 'Copiază';
      copyButton.classList.add('button-24');
      copyButton.setAttribute('role', 'button');
      copyButton.style.marginLeft = '20px';
      copyButton.onclick = copyToClipboard;
      resultDiv.appendChild(copyButton);

      // Adăugăm verificările pentru intervalul de vârstă și procentaj
      var reparatieEconomica = false;

      if (totalMonthsDiff <= 12 && totalMonthsDiff <= 24) {
        if (procentRotunjit <= 50) {
          reparatieEconomica = true;
        }
      } else if (totalMonthsDiff > 24 && totalMonthsDiff <= 30) {
        if (procentRotunjit <= 60) {
          reparatieEconomica = true;
        }
      } else if (totalMonthsDiff > 30 && totalMonthsDiff <= 36) {
        if (procentRotunjit <= 70) {
          reparatieEconomica = true;
        }
      } else if (totalMonthsDiff > 36 && totalMonthsDiff <= 42) {
        if (procentRotunjit <= 80) {
          reparatieEconomica = true;
        }
      } else if (totalMonthsDiff > 42 && totalMonthsDiff <= 48) {
        if (procentRotunjit <= 95) {
          reparatieEconomica = true;
        }
      }

      if (reparatieEconomica) {
        resultDiv.innerHTML += ' | <span class="reparatie-economica">Reparatie economica</span>';
      } else {
        resultDiv.innerHTML += ' | <span class="reparatie-neeconomica">Reparație neeconomică</span>';
      }
    }

    function calculeazaCantitateFreon() {
      var cantitateFreon = parseFloat(document.getElementById('cantitate-freon').value);

      if (isNaN(cantitateFreon)) {
        document.getElementById('result-freon').innerHTML = '';
        return;
      }

      var costFreon = (cantitateFreon / 200) * 145;
      document.getElementById('result-freon').innerHTML = 'Cost Freon: ' + costFreon.toFixed(2) + ' lei';
    }

    function copyCantitateFreonToClipboard() {
      var cantitateFreonInput = document.getElementById('result-freon');

      if (cantitateFreonInput.value === '') {
        cantitateFreonInput.style.borderColor = 'red';
        cantitateFreonInput.style.backgroundColor = 'rgba(255, 0, 0, 0.1)';
        cantitateFreonInput.placeholder = 'Introdu o cantitate';
        cantitateFreonInput.style.color = 'red';
        return;
      }

      var textToCopy = cantitateFreonInput.innerHTML;

      navigator.clipboard.writeText(textToCopy)
        .catch(function() {
          alert('Mai încearcă odată.');
        });
    }

    function copyToClipboard() {
      var piese = document.getElementById('piese').value;
      var manopera = document.getElementById('manopera').value;
      var transport = document.getElementById('transport').value;
      var reparatii = document.getElementById('reparatii').value;
      var produs = document.getElementById('produs').value;
      var data = document.getElementById('data').value;
      var procent = document.getElementById('result').innerHTML.split('|')[0];
      var perioada = document.getElementById('result').innerHTML.split('|')[2];

      var textToCopy = 'Cost piese: ' + piese + '\n';
      textToCopy += 'Cost manoperă: ' + manopera + '\n';
      textToCopy += 'Cost transport: ' + transport + '\n';
      textToCopy += 'Valoarea reparației: ' + reparatii + '\n';
      textToCopy += 'Valoarea produsului: ' + produs + '\n';
      textToCopy += 'Data achiziției: ' + data + '\n';
      textToCopy += procent + '\n';
      textToCopy += perioada + '\n';
      textToCopy += 'Preturi exprimate in lei fara TVA';

      navigator.clipboard.writeText(textToCopy)
        .catch(function() {
          alert('Eroare la copierea informațiilor în clipboard.');
        });
    }
  </script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
  <title>Calculator MDA - fara negatii</title>
  <style>
    body {
      background-image: url("back.jpg");
    }

label {
  background-color: #bbe4e9;
  width: 413.2px;
}

.container {
  width: 400px;
  margin: 50px auto;
}

.input-group {
  margin-bottom: 15px;
}

label {
  display: block;
  margin-bottom: 5px;
  border-radius: 2px;
}

input[type="text"],
select {
  width: 100%;
  padding: 5px;
}

button {
  padding: 10px;
}

#result {
  margin-top: 15px;
  font-weight: bold;
}

li {
  color: white;
}

.legenda {
  border: 2px solid green;
  border-radius: 6.5px;
}

#result > button {
  margin-bottom: 15px;
  transition-duration: 0.4s;
}

#result > button:hover {
  background-color: #4CAF50; /* Green */
  color: white;
}


@media only screen and (max-width: 480px) {
  .container {
    width: 100%;
    margin: 0;
  }
}

#result {
  color: white;
  font-size: 1.1rem;
}
  </style>
  <meta name="author" content="Alex Vlasie">
</head>
<body>
<div class="container">
  <div class="input-group">
    <label for="piese">Cost piese (lei):</label>
    <input type="text" id="piese" oninput="updateReparatiiValue()">
  </div>
  <div class="input-group">
    <label for="manopera">Cost manoperă (lei):</label>
    <input type="text" id="manopera" oninput="updateReparatiiValue()">
  </div>
  <div class="input-group">
    <label for="transport">Cost transport (lei):</label>
    <input type="text" id="transport" oninput="updateReparatiiValue()">
  </div>
  <div class="input-group">
    <label for="reparatii">Valoarea reparației (lei):</label>
    <input type="text" id="reparatii" readonly>
  </div>
  <div class="input-group">
    <label for="produs">Valoarea produsului (lei):</label>
    <input type="text" id="produs">
  </div>
  <div class="input-group">
    <label for="data">Data achiziției:</label>
    <input type="date" id="data">
  </div>
<button onclick="calculeaza()">Calculează</button>

  <div id="result"></div>
  <div class="legenda">
    <ul>
      <li>1-2 ani-50%</li>
      <li>2 ani-2 ani jumatate - 50-60%</li>
      <li>2 ani jumatate-3 ani -  60-70%</li>
      <li>3 ani-3 ani jumatate - 70%-80%</li>
      <li>3 ani jumatate -4 ani - 80%-100%</li>
    </ul>
  </div>
</div>
<script>
  function updateReparatiiValue() {
    var piese = parseFloat(document.getElementById('piese').value);
    var manopera = parseFloat(document.getElementById('manopera').value);
    var transport = parseFloat(document.getElementById('transport').value);

    var reparatiiValue = (isNaN(piese) ? 0 : piese) + (isNaN(manopera) ? 0 : manopera) + (isNaN(transport) ? 0 : transport);
    document.getElementById('reparatii').value = reparatiiValue.toFixed(2);
  }

  function calculeaza() {
    var piese = parseFloat(document.getElementById('piese').value);
    var manopera = parseFloat(document.getElementById('manopera').value);
    var transport = parseFloat(document.getElementById('transport').value);
    var reparatii = parseFloat(document.getElementById('reparatii').value);
    var produs = parseFloat(document.getElementById('produs').value);
    var data = document.getElementById('data').value;

    if (isNaN(reparatii) || isNaN(produs) || isNaN(piese) || isNaN(manopera) || isNaN(transport)) {
      alert('Te rog introdu valori numerice valide pentru câmpurile de costuri și valoarea produsului.');
      return;
    }

    var procent = (reparatii / produs) * 100;
    var procentRotunjit = Math.round(procent * 10) / 10;
    var resultDiv = document.getElementById('result');

    var currentDate = new Date();
    var selectedDate = new Date(data);
    var yearsDiff = currentDate.getFullYear() - selectedDate.getFullYear();
    var monthsDiff = currentDate.getMonth() - selectedDate.getMonth();
    var totalMonthsDiff = yearsDiff * 12 + monthsDiff;

    var perioadaText = '';
    if (totalMonthsDiff === 1) {
      perioadaText = '1 lună';
    } else if (totalMonthsDiff > 1) {
      var years = Math.floor(totalMonthsDiff / 12);
      var months = totalMonthsDiff % 12;

      if (years === 1 && months === 0) {
        perioadaText = '1 an';
      } else if (years === 1 && months === 1) {
        perioadaText = '1 an și 1 lună';
      } else if (years === 1 && months > 1) {
        perioadaText = '1 an și ' + months + ' luni';
      } else if (years > 1 && months === 0) {
        perioadaText = years + ' ani';
      } else if (years > 1 && months === 1) {
        perioadaText = years + ' ani și 1 lună';
      } else {
        perioadaText = years + ' ani și ' + months + ' luni';
      }
    }

    var sumaCosturi = piese + manopera + transport;
    resultDiv.innerHTML = 'Procent: ' + procentRotunjit + '% | Data: ' + data + ' | Perioada: ' + perioadaText;

    if (!isNaN(sumaCosturi)) {
      resultDiv.innerHTML += ' | Costuri: ' + sumaCosturi.toFixed(2) + ' lei';
    }

    var copyButton = document.createElement('button');
    copyButton.innerHTML = 'Copiază';
    copyButton.style.marginLeft = '20px';
    copyButton.onclick = copyToClipboard;
    resultDiv.appendChild(copyButton);
  }

  function copyToClipboard() {
    var piese = document.getElementById('piese').value;
    var manopera = document.getElementById('manopera').value;
    var transport = document.getElementById('transport').value;
    var reparatii = document.getElementById('reparatii').value;
    var produs = document.getElementById('produs').value;
    var data = document.getElementById('data').value;
    var procent = document.getElementById('result').innerHTML.split('|')[0];
    var perioada = document.getElementById('result').innerHTML.split('|')[2];

    var textToCopy = 'Cost piese: ' + piese + '\n';
    textToCopy += 'Cost manoperă: ' + manopera + '\n';
    textToCopy += 'Cost transport: ' + transport + '\n';
    textToCopy += 'Valoarea reparației: ' + reparatii + '\n';
    textToCopy += 'Valoarea produsului: ' + produs + '\n';
    textToCopy += 'Data achiziției: ' + data + '\n';
    textToCopy += procent + '\n';
    textToCopy += 'Perioada garantiala: ' + perioada;

    navigator.clipboard.writeText(textToCopy)
      .then(function() {
        alert('Informațiile au fost copiate în clipboard.');
      })
      .catch(function() {
        alert('Eroare la copierea informațiilor în clipboard.');
      });
  }
</script>
</body>
</html>
